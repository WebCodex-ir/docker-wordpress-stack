\# WordPress High-Performance Stack



این پروژه یک استک کامل، سریع و امن برای راه‌اندازی وردپرس با استفاده از داکر، Traefik، MariaDB و Redis فراهم می‌کند. تمام فرآیندها تا حد امکان خودکار شده‌اند.



\## ویژگی‌ها



\- \*\*نصب آسان:\*\* با یک اسکریپت ساده، تمام نیازمندی‌ها نصب و سرویس‌ها اجرا می‌شوند.

\- \*\*SSL خودکار:\*\* Traefik به صورت خودکار گواهی SSL را از Let's Encrypt (با استفاده از DNS Challenge کلودفلر) دریافت و تمدید می‌کند.

\- \*\*عملکرد بالا:\*\* استفاده از PHP-FPM، MariaDB و کشینگ Redis برای حداکثر سرعت.

\- \*\*امنیت:\*\* پیکربندی امن، فایروال خودکار و استفاده از متغیرهای محیطی برای اطلاعات حساس.



\## پیش‌نیازها



1\.  یک سرور با سیستم عامل \*\*Ubuntu 24.04\*\* (یا نسخه‌های جدیدتر).

2\.  یک \*\*دامنه\*\* که به \*\*Cloudflare\*\* متصل است.

3\.  \*\*ایمیل حساب کاربری کلودفلر\*\* شما.

4\.  \*\*توکن API کلودفلر\*\* (Cloudflare API Token) با دسترسی ویرایش DNS برای دامنه مورد نظر.



\## راهنمای نصب سریع



1\.  این پروژه را روی سرور خود کلون کنید:

&nbsp;   ```bash

&nbsp;   git clone \[your-github-repo-url]

&nbsp;   cd \[project-folder]

&nbsp;   ```



2\.  یک کپی از فایل `.env.example` با نام `.env` بسازید:

&nbsp;   ```bash

&nbsp;   cp .env.example .env

&nbsp;   ```



3\.  فایل `.env` را با ویرایشگر متن باز کرده و مقادیر زیر را با اطلاعات خود جایگزین کنید:

&nbsp;   - `DOMAIN\_NAME`: دامنه اصلی سایت شما (مثلا: `webcodex.ir`).

&nbsp;   - `CLOUDFLARE\_EMAIL`: ایمیلی که با آن در کلودفلر ثبت‌نام کرده‌اید.

&nbsp;   - `DB\_...`: رمزهای عبور قوی و تصادفی برای دیتابیس.



4\.  اسکریپت نصب را با دسترسی `sudo` اجرا کنید:

&nbsp;   ```bash

&nbsp;   sudo ./install.sh

&nbsp;   ```

&nbsp;   اسکریپت تمام نیازمندی‌ها را نصب و سرویس‌ها را اجرا می‌کند.



5\.  \*\*تنظیمات کلودفلر:\*\*

&nbsp;   - به پنل کلودفلر بروید.

&nbsp;   - در بخش DNS، یک رکورد `A` برای دامنه اصلی خود (`@`) و `www` (در صورت نیاز) ایجاد کنید که به \*\*آدرس IP سرور شما\*\* اشاره کند.

&nbsp;   - به بخش SSL/TLS بروید و حالت آن را روی \*\*Full (Strict)\*\* تنظیم کنید.



صبر کنید تا DNS آپدیت شود. سایت شما با SSL معتبر در دسترس خواهد بود.



\## راهنمای انتقال سایت وردپرسی



\### روش پیشنهادی: استفاده از افزونه All-in-One WP Migration



این ساده‌ترین و کامل‌ترین روش برای انتقال است.



1\.  \*\*در سایت قدیمی (مبدا):\*\*

&nbsp;   - افزونه \[All-in-One WP Migration](https://wordpress.org/plugins/all-in-one-wp-migration/) را نصب و فعال کنید.

&nbsp;   - از منوی افزونه، گزینه \*\*Export\*\* را انتخاب کرده و یک فایل بک‌آپ (`.wpress`) از کل سایت خود تهیه کنید.



2\.  \*\*در سایت جدید (مقصد):\*\*

&nbsp;   - پس از اجرای موفقیت‌آمیز اسکریپت، به آدرس `http://your-domain.com/wp-admin` بروید (ممکن است ابتدا خطای SSL ببینید، صبر کنید تا SSL نصب شود).

&nbsp;   - مراحل نصب اولیه وردپرس را طی کنید.

&nbsp;   - افزونه \*\*All-in-One WP Migration\*\* را در سایت جدید نیز نصب کنید.

&nbsp;   - از منوی افزونه، گزینه \*\*Import\*\* را انتخاب کرده و فایل `.wpress` که در مرحله قبل دانلود کردید را آپلود کنید.

&nbsp;   - افزونه تمام کارها (انتقال فایل‌ها، دیتابیس و جایگزینی آدرس‌ها) را به صورت خودکار انجام می‌دهد.



پس از پایان ایمپورت، سایت شما به طور کامل منتقل شده است.



\### دستورات مدیریتی مفید



\- \*\*مشاهده لاگ‌ها:\*\* `sudo docker compose logs -f`

\- \*\*متوقف کردن سرویس‌ها:\*\* `sudo docker compose stop`

\- \*\*شروع مجدد سرویس‌ها:\*\* `sudo docker compose start`

\- \*\*خاموش کردن و حذف کانتینرها:\*\* `sudo docker compose down`



---

