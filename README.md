# استک داکر وردپرس با عملکرد بالا

این پروژه یک قالب آماده و حرفه‌ای برای راه‌اندازی یک سایت وردپرسی بسیار سریع، امن و بهینه با استفاده از Docker است. تمام فرآیندها برای نصب آسان و سریع، خودکار شده‌اند.

##  معماری 🏗️

این استک از بهترین ابزارهای مدرن برای اجرای وردپرس استفاده می‌کند:
* **Reverse Proxy:** **Traefik** (برای مسیریابی هوشمند و مدیریت خودکار SSL)
* **وب سرور:** **Nginx** (برای سرویس‌دهی به فایل‌های وردپرس و ارتباط با PHP)
* **اپلیکیشن:** **WordPress** (اجرا شده روی آخرین نسخه PHP-FPM)
* **دیتابیس:** **MariaDB** (جایگزین سریع‌تر و بهینه‌تر MySQL)
* **کشینگ:** **Redis** (برای کش آبجکت‌ها و افزایش چشمگیر سرعت)

## پیش‌نیازها 📋

1.  یک سرور با سیستم عامل **Ubuntu 22.04 / 24.04**.
2.  یک **دامنه** که Nameserver های آن روی **Cloudflare** تنظیم شده باشد.
3.  یک **توکن API از کلودفلر** (Cloudflare API Token) با دسترسی `Edit zone DNS`.

## راهنمای نصب سریع 🚀

### **مرحله ۱: دریافت پروژه از گیت‌هاب**
با SSH به سرور خود متصل شوید و این ریپازیتوری را کلون کنید:
```bash
git clone [https://github.com/WebCodex-ir/docker-wordpress-stack.git](https://github.com/WebCodex-ir/docker-wordpress-stack.git)
cd docker-wordpress-stack
````

### **مرحله ۲: پیکربندی متغیرها**

فایل نمونه را کپی کرده و فایل `.env` خود را بسازید:

```bash
cp .env.example .env
```

سپس فایل `.env` را با ویرایشگر `nano` باز کرده و اطلاعات خود را وارد کنید:

```bash
nano .env
```

در این فایل، `DOMAIN_NAME`، `CLOUDFLARE_EMAIL`، `CLOUDFLARE_DNS_API_TOKEN` و رمزهای عبور دیتابیس را با مقادیر واقعی خود جایگزین کنید.

### **مرحله ۳: اجرای اسکریپت نصب**

ابتدا اسکریپت نصب را قابل اجرا کرده و سپس آن را با دسترسی `sudo` اجرا کنید:

```bash
chmod +x install.sh
sudo ./install.sh
```

این اسکریپت به صورت خودکار داکر را نصب، فایروال را تنظیم و تمام سرویس‌ها را راه‌اندازی می‌کند.

### **مرحله ۴: تنظیمات DNS در کلودفلر**

1.  وارد داشبورد کلودفلر خود شوید.
2.  در بخش DNS، یک رکورد `A` برای دامنه اصلی خود (مثلاً `sialkplast.ir`) بسازید که به **IP سرور شما** اشاره کند. مطمئن شوید که وضعیت پروکسی (ابر نارنجی) **فعال** باشد.
3.  یک رکورد `A` دیگر برای ساب‌دامین `traefik` (مثلاً `traefik.sialkplast.ir`) بسازید که به همان IP اشاره کند.
4.  به تب `SSL/TLS` بروید و حالت رمزنگاری (Encryption mode) را روی **Full (Strict)** قرار دهید.

پس از چند دقیقه، سایت شما با SSL معتبر در آدرس `https://your-domain.com` در دسترس خواهد بود.

## دستورات مدیریتی ⚙️

  * **مشاهده تمام کانتینرهای در حال اجرا:** `sudo docker ps`
  * **مشاهده لاگ‌های یک سرویس:** `sudo docker compose logs -f <service_name>` (برای مثال: `traefik`, `nginx`, `wordpress`)
  * **متوقف کردن تمام سرویس‌ها:** `sudo docker compose down`
  * **شروع مجدد تمام سرویس‌ها:** `sudo docker compose up -d`

## راهنمای انتقال سایت وردپرسی 🚚

ساده‌ترین روش برای انتقال سایت فعلی شما، استفاده از افزونه **All-in-One WP Migration** است.

1.  **در سایت قدیمی (مبدأ):** افزونه را نصب کرده و از منوی آن یک خروجی (Export) با فرمت `.wpress` از کل سایت خود بگیرید.
2.  **در سایت جدید (مقصد):**
      * پس از نصب موفقیت‌آمیز، با ورود به دامنه خود، مراحل نصب اولیه وردپرس را انجام دهید.
      * وارد پیشخوان وردپرس شده و افزونه All-in-One WP Migration را نصب کنید.
      * از منوی افزونه، به بخش Import رفته و فایل `.wpress` که از سایت قدیمی دریافت کرده‌اید را آپلود کنید.
      * افزونه به صورت خودکار تمام فایل‌ها، دیتابیس و تنظیمات را جایگزین می‌کند.

پس از پایان ایمپورت، سایت شما به طور کامل منتقل شده است.

